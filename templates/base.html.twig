<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    {# meta.title #}
    <title>
      {%- block meta_title -%}
        {%- if meta.title is defined and meta.title is not empty -%}
            {{ meta.title }} - Kakeibo
        {%- else -%}
            Kakeibo
        {%- endif -%}
      {%- endblock -%}
    </title>

    {# meta.desc #}
    {%- block meta_desc -%}
      {% if meta.desc is defined and meta.desc is not empty %}
        <meta name="description" content="{{ meta.desc }}" />
      {% endif %}
    {%- endblock -%}

    {# meta.robots #}
    {% if meta.robots is defined and meta.robots is not empty %}
      <meta name="robots" content="{{ meta.robots }}" />
    {% else %}
      <meta name="robots" content="noindex, nofollow" />
    {% endif %}

    {# Stylesheets #}
    <link rel="stylesheet" href="{{ asset('build/google-fonts.css') }}">
    <link rel="stylesheet" href="{{ asset('build/kakeibo.css') }}">
    {% if stylesheets is defined %}
      {% for stylesheet_url in stylesheets %}
        <link rel="stylesheet" href="{{ asset('build/' ~ stylesheet_url) }}">
      {% endfor %}
    {% endif %}
    {# Custom stylesheets from twig templates #}
    {% block stylesheets %}{% endblock %}
  </head>

  <body class="app-core{% if core_class is defined %} {{ core_class }}{% endif %}">
    {# Header #}
    {% block header %}
      {% include 'components/header.html.twig' %}
    {% endblock %}

    <div id="app" class="app-body{% if body_class is defined %} {{ body_class }}{% endif %}">
      {# Notices/Errors messages from "flashbag" #}
      {% block flashes %}
        <div class="container">{% include 'components/flashes.html.twig' %}</div>
      {% endblock %}

      {# Body #}
      {% block body %}{% endblock %}
    </div>

    {# Footer #}
    {% block footer %}
      {% include 'components/footer.html.twig' %}
    {% endblock %}

    <span class="viewport-sizes">
      <span class="d-block d-sm-none" data-viewport-size-slug="xs"></span>
      <span class="d-none d-sm-block d-md-none" data-viewport-size-slug="sm"></span>
      <span class="d-none d-md-block d-lg-none" data-viewport-size-slug="md"></span>
      <span class="d-none d-lg-block d-xl-none" data-viewport-size-slug="lg"></span>
      <span class="d-none d-xl-block" data-viewport-size-slug="xl"></span>
    </span>

    {% if app.user is defined and app.user is not null and form_transaction is defined %}
      <div class="app-panel app-panel--top app-panel--transaction-form">
        <div class="-inner container">
          {{ form_start(form_transaction, { 'action': path('transaction_manage') }) }}
            {% include 'components/forms/transaction.html.twig' %}

            <div class="mt-2 text-center">
              <button class="btn btn-sm btn-outline-light mx-1 toggle-panel-transaction" type="button">
                Annuler
              </button>

              <button class="btn btn-primary mx-1" type="submit" name="submit">
                <span class="icon icon-plus-square"></span>
                Ajouter
              </button>
            </div>
          {{ form_end(form_transaction) }}
        </div>
      </div>
    {% endif %}

    <div class="app-loader"></div>

    {# Custom javascripts from twig templates #}
    {% block javascripts_defines %}{% endblock %}

    {# Javascripts #}
    <script src="{{ asset('build/manifest.js') }}"></script>
    <script src="{{ asset('build/vendors.js') }}"></script>
    <script src="{{ asset('build/kakeibo.js') }}"></script>
    {% if scripts is defined %}
      {% for script_url in scripts %}
        <script src="{{ asset('build/' ~ script_url) }}"></script>
      {% endfor %}
    {% endif %}

    {# Custom javascripts from twig templates #}
    {% block javascripts %}{% endblock %}
  </body>
</html>
